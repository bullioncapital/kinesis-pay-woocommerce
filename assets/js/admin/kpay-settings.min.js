jQuery(function(e){e(document).ready(()=>{if("undefined"==typeof kpay_settings_data)return!1;const t=kpay_settings_data.is_test_mode,s=kpay_settings_data.test_connection_action,n=kpay_settings_data.messages,a=t?"woocommerce_kinesis_pay_gateway_test_merchant_id":"woocommerce_kinesis_pay_gateway_merchant_id",c=t?"woocommerce_kinesis_pay_gateway_test_publishable_key":"woocommerce_kinesis_pay_gateway_publishable_key",o=t?"woocommerce_kinesis_pay_gateway_test_private_key":"woocommerce_kinesis_pay_gateway_private_key",i=document.getElementById(a),_=document.getElementById(c),r=document.getElementById(o),d=document.getElementById("connection-message-success"),m=document.getElementById("connection-message-failure"),y=(e,t=null)=>{if(d&&m)switch(e){case"success":d.hidden=!1,m.hidden=!0;break;case"failure":m.innerText=`${n.failure_error} ${t||""}`,d.hidden=!0,m.hidden=!1;break;default:d.hidden=!0,m.hidden=!0}};i&&i.addEventListener("change",()=>{y("reset")}),_&&_.addEventListener("change",()=>{y("reset")}),r&&r.addEventListener("change",()=>{y("reset")});const u=document.getElementById("woocommerce_kinesis_pay_gateway_test_connection_action");u&&u.addEventListener("click",()=>{y("reset");const t=i.value,a=_.value,c=r.value;t&&a&&c?e.ajax({type:"POST",dataType:"json",url:woocommerce_admin.ajax_url,data:{action:s,merchant_id:t,access_token:a,secret_token:c},success:e=>{if("success"===e.type)y("success");else{const t=e.message;y("failure",t)}},error:e=>{const t=e.responseJSON?e.responseJSON.message:null;console.log(`${n.exception_error} ${t||""}`),y("failure",t)}}):alert(n.input_missing_error)})})});